import{ac as Se,Y as g,ad as Nt,ae as ze,a4 as Q,af as _,ag as ct,ah as ut,ai as Jt,a0 as Re,aj as dt,a3 as st,ak as pt,al as De,am as Ee,an as et,ao as Ce,a7 as k,ap as te,aq as Wt,ar as ht,Z as at,$ as Pe,as as yt,at as xt,au as Ae,av as Me,a8 as _e,a9 as $t,ab as Ct,a1 as ke,aw as We,ax as Te,_ as ee}from"./index-BkeddzzV.js";import{M as Oe,a as Ne,b as Be,C as He}from"./WindowActionIcons-bInO6eDg.js";import{b as Le,a as $e}from"./useTitlebarContextMenu-BRWRnbNJ.js";var zt={exports:{}},ie={},oe={exports:{}},Ie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Fe=Ie,je=Fe;function ne(){}function re(){}re.resetWarningCache=ne;var Ue=function(){function t(e,n,a,r,s,c){if(c!==je){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function o(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:re,resetWarningCache:ne};return i.PropTypes=i,i};oe.exports=Ue();var se=oe.exports;function ae(t){var o,i,e="";if(typeof t=="string"||typeof t=="number")e+=t;else if(typeof t=="object")if(Array.isArray(t))for(o=0;o<t.length;o++)t[o]&&(i=ae(t[o]))&&(e&&(e+=" "),e+=i);else for(o in t)t[o]&&(e&&(e+=" "),e+=o);return e}function It(){for(var t,o,i=0,e="";i<arguments.length;)(t=arguments[i++])&&(o=ae(t))&&(e&&(e+=" "),e+=o);return e}const Ye=Object.freeze(Object.defineProperty({__proto__:null,clsx:It,default:It},Symbol.toStringTag,{value:"Module"})),Xe=Se(Ye);var W={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.dontSetMe=Ke;K.findInArray=Ge;K.int=Qe;K.isFunction=Ve;K.isNum=qe;function Ge(t,o){for(let i=0,e=t.length;i<e;i++)if(o.apply(o,[t[i],i,t]))return t[i]}function Ve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function qe(t){return typeof t=="number"&&!isNaN(t)}function Qe(t){return parseInt(t,10)}function Ke(t,o,i){if(t[o])return new Error("Invalid prop ".concat(o," passed to ").concat(i," - do not set this, set it on the child."))}var it={};Object.defineProperty(it,"__esModule",{value:!0});it.browserPrefixToKey=ce;it.browserPrefixToStyle=Ze;it.default=void 0;it.getPrefix=le;const Pt=["Moz","Webkit","O","ms"];function le(){var t;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const i=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!i||o in i)return"";for(let e=0;e<Pt.length;e++)if(ce(o,Pt[e])in i)return Pt[e];return""}function ce(t,o){return o?"".concat(o).concat(Je(t)):t}function Ze(t,o){return o?"-".concat(o.toLowerCase(),"-").concat(t):t}function Je(t){let o="",i=!0;for(let e=0;e<t.length;e++)i?(o+=t[e].toUpperCase(),i=!1):t[e]==="-"?i=!0:o+=t[e];return o}it.default=le();Object.defineProperty(W,"__esModule",{value:!0});W.addClassName=de;W.addEvent=ii;W.addUserSelectStyles=pi;W.createCSSTransform=ci;W.createSVGTransform=ui;W.getTouch=hi;W.getTouchIdentifier=di;W.getTranslation=Bt;W.innerHeight=si;W.innerWidth=ai;W.matchesSelector=he;W.matchesSelectorAndParentsTo=ei;W.offsetXYFromParent=li;W.outerHeight=ni;W.outerWidth=ri;W.removeClassName=pe;W.removeEvent=oi;W.removeUserSelectStyles=fi;var X=K,Ft=ti(it);function ue(t){if(typeof WeakMap!="function")return null;var o=new WeakMap,i=new WeakMap;return(ue=function(e){return e?i:o})(t)}function ti(t,o){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var i=ue(o);if(i&&i.has(t))return i.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var r=n?Object.getOwnPropertyDescriptor(t,a):null;r&&(r.get||r.set)?Object.defineProperty(e,a,r):e[a]=t[a]}return e.default=t,i&&i.set(t,e),e}let gt="";function he(t,o){return gt||(gt=(0,X.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(i){return(0,X.isFunction)(t[i])})),(0,X.isFunction)(t[gt])?t[gt](o):!1}function ei(t,o,i){let e=t;do{if(he(e,o))return!0;if(e===i)return!1;e=e.parentNode}while(e);return!1}function ii(t,o,i,e){if(!t)return;const n={capture:!0,...e};t.addEventListener?t.addEventListener(o,i,n):t.attachEvent?t.attachEvent("on"+o,i):t["on"+o]=i}function oi(t,o,i,e){if(!t)return;const n={capture:!0,...e};t.removeEventListener?t.removeEventListener(o,i,n):t.detachEvent?t.detachEvent("on"+o,i):t["on"+o]=null}function ni(t){let o=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return o+=(0,X.int)(i.borderTopWidth),o+=(0,X.int)(i.borderBottomWidth),o}function ri(t){let o=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return o+=(0,X.int)(i.borderLeftWidth),o+=(0,X.int)(i.borderRightWidth),o}function si(t){let o=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return o-=(0,X.int)(i.paddingTop),o-=(0,X.int)(i.paddingBottom),o}function ai(t){let o=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return o-=(0,X.int)(i.paddingLeft),o-=(0,X.int)(i.paddingRight),o}function li(t,o,i){const n=o===o.ownerDocument.body?{left:0,top:0}:o.getBoundingClientRect(),a=(t.clientX+o.scrollLeft-n.left)/i,r=(t.clientY+o.scrollTop-n.top)/i;return{x:a,y:r}}function ci(t,o){const i=Bt(t,o,"px");return{[(0,Ft.browserPrefixToKey)("transform",Ft.default)]:i}}function ui(t,o){return Bt(t,o,"")}function Bt(t,o,i){let{x:e,y:n}=t,a="translate(".concat(e).concat(i,",").concat(n).concat(i,")");if(o){const r="".concat(typeof o.x=="string"?o.x:o.x+i),s="".concat(typeof o.y=="string"?o.y:o.y+i);a="translate(".concat(r,", ").concat(s,")")+a}return a}function hi(t,o){return t.targetTouches&&(0,X.findInArray)(t.targetTouches,i=>o===i.identifier)||t.changedTouches&&(0,X.findInArray)(t.changedTouches,i=>o===i.identifier)}function di(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function pi(t){if(!t)return;let o=t.getElementById("react-draggable-style-el");o||(o=t.createElement("style"),o.type="text/css",o.id="react-draggable-style-el",o.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,o.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(o)),t.body&&de(t.body,"react-draggable-transparent-selection")}function fi(t){if(t)try{if(t.body&&pe(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const o=(t.defaultView||window).getSelection();o&&o.type!=="Caret"&&o.removeAllRanges()}}catch{}}function de(t,o){t.classList?t.classList.add(o):t.className.match(new RegExp("(?:^|\\s)".concat(o,"(?!\\S)")))||(t.className+=" ".concat(o))}function pe(t,o){t.classList?t.classList.remove(o):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(o,"(?!\\S)"),"g"),"")}var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.canDragX=bi;Z.canDragY=vi;Z.createCoreData=yi;Z.createDraggableData=xi;Z.getBoundPosition=gi;Z.getControlPosition=wi;Z.snapToGrid=mi;var Y=K,nt=W;function gi(t,o,i){if(!t.props.bounds)return[o,i];let{bounds:e}=t.props;e=typeof e=="string"?e:Si(e);const n=Ht(t);if(typeof e=="string"){const{ownerDocument:a}=n,r=a.defaultView;let s;if(e==="parent"?s=n.parentNode:s=a.querySelector(e),!(s instanceof r.HTMLElement))throw new Error('Bounds selector "'+e+'" could not find an element.');const c=s,l=r.getComputedStyle(n),u=r.getComputedStyle(c);e={left:-n.offsetLeft+(0,Y.int)(u.paddingLeft)+(0,Y.int)(l.marginLeft),top:-n.offsetTop+(0,Y.int)(u.paddingTop)+(0,Y.int)(l.marginTop),right:(0,nt.innerWidth)(c)-(0,nt.outerWidth)(n)-n.offsetLeft+(0,Y.int)(u.paddingRight)-(0,Y.int)(l.marginRight),bottom:(0,nt.innerHeight)(c)-(0,nt.outerHeight)(n)-n.offsetTop+(0,Y.int)(u.paddingBottom)-(0,Y.int)(l.marginBottom)}}return(0,Y.isNum)(e.right)&&(o=Math.min(o,e.right)),(0,Y.isNum)(e.bottom)&&(i=Math.min(i,e.bottom)),(0,Y.isNum)(e.left)&&(o=Math.max(o,e.left)),(0,Y.isNum)(e.top)&&(i=Math.max(i,e.top)),[o,i]}function mi(t,o,i){const e=Math.round(o/t[0])*t[0],n=Math.round(i/t[1])*t[1];return[e,n]}function bi(t){return t.props.axis==="both"||t.props.axis==="x"}function vi(t){return t.props.axis==="both"||t.props.axis==="y"}function wi(t,o,i){const e=typeof o=="number"?(0,nt.getTouch)(t,o):null;if(typeof o=="number"&&!e)return null;const n=Ht(i),a=i.props.offsetParent||n.offsetParent||n.ownerDocument.body;return(0,nt.offsetXYFromParent)(e||t,a,i.props.scale)}function yi(t,o,i){const e=!(0,Y.isNum)(t.lastX),n=Ht(t);return e?{node:n,deltaX:0,deltaY:0,lastX:o,lastY:i,x:o,y:i}:{node:n,deltaX:o-t.lastX,deltaY:i-t.lastY,lastX:t.lastX,lastY:t.lastY,x:o,y:i}}function xi(t,o){const i=t.props.scale;return{node:o.node,x:t.state.x+o.deltaX/i,y:t.state.y+o.deltaY/i,deltaX:o.deltaX/i,deltaY:o.deltaY/i,lastX:t.state.x,lastY:t.state.y}}function Si(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Ht(t){const o=t.findDOMNode();if(!o)throw new Error("<DraggableCore>: Unmounted during event!");return o}var Rt={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.default=zi;function zi(){}Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=void 0;var At=Di(g),j=Lt(se),Ri=Lt(Nt),L=W,J=Z,Mt=K,lt=Lt(Dt);function Lt(t){return t&&t.__esModule?t:{default:t}}function fe(t){if(typeof WeakMap!="function")return null;var o=new WeakMap,i=new WeakMap;return(fe=function(e){return e?i:o})(t)}function Di(t,o){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var i=fe(o);if(i&&i.has(t))return i.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var r=n?Object.getOwnPropertyDescriptor(t,a):null;r&&(r.get||r.set)?Object.defineProperty(e,a,r):e[a]=t[a]}return e.default=t,i&&i.set(t,e),e}function I(t,o,i){return o=Ei(o),o in t?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i,t}function Ei(t){var o=Ci(t,"string");return typeof o=="symbol"?o:String(o)}function Ci(t,o){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var e=i.call(t,o||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}const V={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let tt=V.mouse,Et=class extends At.Component{constructor(){super(...arguments),I(this,"dragging",!1),I(this,"lastX",NaN),I(this,"lastY",NaN),I(this,"touchIdentifier",null),I(this,"mounted",!1),I(this,"handleDragStart",o=>{if(this.props.onMouseDown(o),!this.props.allowAnyClick&&typeof o.button=="number"&&o.button!==0)return!1;const i=this.findDOMNode();if(!i||!i.ownerDocument||!i.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:e}=i;if(this.props.disabled||!(o.target instanceof e.defaultView.Node)||this.props.handle&&!(0,L.matchesSelectorAndParentsTo)(o.target,this.props.handle,i)||this.props.cancel&&(0,L.matchesSelectorAndParentsTo)(o.target,this.props.cancel,i))return;o.type==="touchstart"&&o.preventDefault();const n=(0,L.getTouchIdentifier)(o);this.touchIdentifier=n;const a=(0,J.getControlPosition)(o,n,this);if(a==null)return;const{x:r,y:s}=a,c=(0,J.createCoreData)(this,r,s);(0,lt.default)("DraggableCore: handleDragStart: %j",c),(0,lt.default)("calling",this.props.onStart),!(this.props.onStart(o,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,L.addUserSelectStyles)(e),this.dragging=!0,this.lastX=r,this.lastY=s,(0,L.addEvent)(e,tt.move,this.handleDrag),(0,L.addEvent)(e,tt.stop,this.handleDragStop))}),I(this,"handleDrag",o=>{const i=(0,J.getControlPosition)(o,this.touchIdentifier,this);if(i==null)return;let{x:e,y:n}=i;if(Array.isArray(this.props.grid)){let s=e-this.lastX,c=n-this.lastY;if([s,c]=(0,J.snapToGrid)(this.props.grid,s,c),!s&&!c)return;e=this.lastX+s,n=this.lastY+c}const a=(0,J.createCoreData)(this,e,n);if((0,lt.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(o,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=e,this.lastY=n}),I(this,"handleDragStop",o=>{if(!this.dragging)return;const i=(0,J.getControlPosition)(o,this.touchIdentifier,this);if(i==null)return;let{x:e,y:n}=i;if(Array.isArray(this.props.grid)){let c=e-this.lastX||0,l=n-this.lastY||0;[c,l]=(0,J.snapToGrid)(this.props.grid,c,l),e=this.lastX+c,n=this.lastY+l}const a=(0,J.createCoreData)(this,e,n);if(this.props.onStop(o,a)===!1||this.mounted===!1)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(s.ownerDocument),(0,lt.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,lt.default)("DraggableCore: Removing handlers"),(0,L.removeEvent)(s.ownerDocument,tt.move,this.handleDrag),(0,L.removeEvent)(s.ownerDocument,tt.stop,this.handleDragStop))}),I(this,"onMouseDown",o=>(tt=V.mouse,this.handleDragStart(o))),I(this,"onMouseUp",o=>(tt=V.mouse,this.handleDragStop(o))),I(this,"onTouchStart",o=>(tt=V.touch,this.handleDragStart(o))),I(this,"onTouchEnd",o=>(tt=V.touch,this.handleDragStop(o)))}componentDidMount(){this.mounted=!0;const o=this.findDOMNode();o&&(0,L.addEvent)(o,V.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const o=this.findDOMNode();if(o){const{ownerDocument:i}=o;(0,L.removeEvent)(i,V.mouse.move,this.handleDrag),(0,L.removeEvent)(i,V.touch.move,this.handleDrag),(0,L.removeEvent)(i,V.mouse.stop,this.handleDragStop),(0,L.removeEvent)(i,V.touch.stop,this.handleDragStop),(0,L.removeEvent)(o,V.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(i)}}findDOMNode(){var o,i;return(o=this.props)!==null&&o!==void 0&&o.nodeRef?(i=this.props)===null||i===void 0||(i=i.nodeRef)===null||i===void 0?void 0:i.current:Ri.default.findDOMNode(this)}render(){return At.cloneElement(At.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Rt.default=Et;I(Et,"displayName","DraggableCore");I(Et,"propTypes",{allowAnyClick:j.default.bool,children:j.default.node.isRequired,disabled:j.default.bool,enableUserSelectHack:j.default.bool,offsetParent:function(t,o){if(t[o]&&t[o].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:j.default.arrayOf(j.default.number),handle:j.default.string,cancel:j.default.string,nodeRef:j.default.object,onStart:j.default.func,onDrag:j.default.func,onStop:j.default.func,onMouseDown:j.default.func,scale:j.default.number,className:Mt.dontSetMe,style:Mt.dontSetMe,transform:Mt.dontSetMe});I(Et,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var o=y(g),i=u(se),e=u(Nt),n=u(Xe),a=W,r=Z,s=K,c=u(Rt),l=u(Dt);function u(h){return h&&h.__esModule?h:{default:h}}function f(h){if(typeof WeakMap!="function")return null;var d=new WeakMap,p=new WeakMap;return(f=function(m){return m?p:d})(h)}function y(h,d){if(h&&h.__esModule)return h;if(h===null||typeof h!="object"&&typeof h!="function")return{default:h};var p=f(d);if(p&&p.has(h))return p.get(h);var m={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in h)if(x!=="default"&&Object.prototype.hasOwnProperty.call(h,x)){var P=D?Object.getOwnPropertyDescriptor(h,x):null;P&&(P.get||P.set)?Object.defineProperty(m,x,P):m[x]=h[x]}return m.default=h,p&&p.set(h,m),m}function b(){return b=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var p=arguments[d];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(h[m]=p[m])}return h},b.apply(this,arguments)}function S(h,d,p){return d=z(d),d in h?Object.defineProperty(h,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[d]=p,h}function z(h){var d=R(h,"string");return typeof d=="symbol"?d:String(d)}function R(h,d){if(typeof h!="object"||h===null)return h;var p=h[Symbol.toPrimitive];if(p!==void 0){var m=p.call(h,d||"default");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}class v extends o.Component{static getDerivedStateFromProps(d,p){let{position:m}=d,{prevPropsPosition:D}=p;return m&&(!D||m.x!==D.x||m.y!==D.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:m,prevPropsPosition:D}),{x:m.x,y:m.y,prevPropsPosition:{...m}}):null}constructor(d){super(d),S(this,"onDragStart",(p,m)=>{if((0,l.default)("Draggable: onDragStart: %j",m),this.props.onStart(p,(0,r.createDraggableData)(this,m))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),S(this,"onDrag",(p,m)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",m);const D=(0,r.createDraggableData)(this,m),x={x:D.x,y:D.y,slackX:0,slackY:0};if(this.props.bounds){const{x:A,y:C}=x;x.x+=this.state.slackX,x.y+=this.state.slackY;const[E,w]=(0,r.getBoundPosition)(this,x.x,x.y);x.x=E,x.y=w,x.slackX=this.state.slackX+(A-x.x),x.slackY=this.state.slackY+(C-x.y),D.x=x.x,D.y=x.y,D.deltaX=x.x-this.state.x,D.deltaY=x.y-this.state.y}if(this.props.onDrag(p,D)===!1)return!1;this.setState(x)}),S(this,"onDragStop",(p,m)=>{if(!this.state.dragging||this.props.onStop(p,(0,r.createDraggableData)(this,m))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",m);const x={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:A,y:C}=this.props.position;x.x=A,x.y=C}this.setState(x)}),this.state={dragging:!1,dragged:!1,x:d.position?d.position.x:d.defaultPosition.x,y:d.position?d.position.y:d.defaultPosition.y,prevPropsPosition:{...d.position},slackX:0,slackY:0,isElementSVG:!1},d.position&&!(d.onDrag||d.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var d,p;return(d=(p=this.props)===null||p===void 0||(p=p.nodeRef)===null||p===void 0?void 0:p.current)!==null&&d!==void 0?d:e.default.findDOMNode(this)}render(){const{axis:d,bounds:p,children:m,defaultPosition:D,defaultClassName:x,defaultClassNameDragging:P,defaultClassNameDragged:A,position:C,positionOffset:E,scale:w,...M}=this.props;let F={},$=null;const U=!!!C||this.state.dragging,B=C||D,H={x:(0,r.canDragX)(this)&&U?this.state.x:B.x,y:(0,r.canDragY)(this)&&U?this.state.y:B.y};this.state.isElementSVG?$=(0,a.createSVGTransform)(H,E):F=(0,a.createCSSTransform)(H,E);const ft=(0,n.default)(m.props.className||"",x,{[P]:this.state.dragging,[A]:this.state.dragged});return o.createElement(c.default,b({},M,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(m),{className:ft,style:{...m.props.style,...F},transform:$}))}}t.default=v,S(v,"displayName","Draggable"),S(v,"propTypes",{...c.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),S(v,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ie);const{default:ge,DraggableCore:Pi}=ie;zt.exports=ge;zt.exports.default=ge;zt.exports.DraggableCore=Pi;var Ai=zt.exports;const Mi=ze(Ai);var _i=function(){var t=function(o,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},t(o,i)};return function(o,i){t(o,i);function e(){this.constructor=o}o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),O=function(){return O=Object.assign||function(t){for(var o,i=1,e=arguments.length;i<e;i++){o=arguments[i];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},O.apply(this,arguments)},jt={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Ut={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},mt={width:"20px",height:"20px",position:"absolute"},ki={top:O(O({},jt),{top:"-5px"}),right:O(O({},Ut),{left:void 0,right:"-5px"}),bottom:O(O({},jt),{top:void 0,bottom:"-5px"}),left:O(O({},Ut),{left:"-5px"}),topRight:O(O({},mt),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:O(O({},mt),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:O(O({},mt),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:O(O({},mt),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Wi=function(t){_i(o,t);function o(){var i=t!==null&&t.apply(this,arguments)||this;return i.onMouseDown=function(e){i.props.onResizeStart(e,i.props.direction)},i.onTouchStart=function(e){i.props.onResizeStart(e,i.props.direction)},i}return o.prototype.render=function(){return g.createElement("div",{className:this.props.className||"",style:O(O({position:"absolute",userSelect:"none"},ki[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},o}(g.PureComponent),Ti=function(){var t=function(o,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},t(o,i)};return function(o,i){t(o,i);function e(){this.constructor=o}o.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),q=function(){return q=Object.assign||function(t){for(var o,i=1,e=arguments.length;i<e;i++){o=arguments[i];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},q.apply(this,arguments)},Oi={width:"auto",height:"auto"},bt=function(t,o,i){return Math.max(Math.min(t,i),o)},Yt=function(t,o){return Math.round(t/o)*o},ot=function(t,o){return new RegExp(t,"i").test(o)},vt=function(t){return!!(t.touches&&t.touches.length)},Ni=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},Xt=function(t,o,i){i===void 0&&(i=0);var e=o.reduce(function(a,r,s){return Math.abs(r-t)<Math.abs(o[a]-t)?s:a},0),n=Math.abs(o[e]-t);return i===0||n<i?o[e]:t},_t=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:t+"px"},wt=function(t,o,i,e){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var n=Number(t.replace("%",""))/100;return o*n}if(t.endsWith("vw")){var n=Number(t.replace("vw",""))/100;return i*n}if(t.endsWith("vh")){var n=Number(t.replace("vh",""))/100;return e*n}}return t},Bi=function(t,o,i,e,n,a,r){return e=wt(e,t.width,o,i),n=wt(n,t.height,o,i),a=wt(a,t.width,o,i),r=wt(r,t.height,o,i),{maxWidth:typeof e>"u"?void 0:Number(e),maxHeight:typeof n>"u"?void 0:Number(n),minWidth:typeof a>"u"?void 0:Number(a),minHeight:typeof r>"u"?void 0:Number(r)}},Hi=function(t){return Array.isArray(t)?t:[t,t]},Li=["as","ref","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Gt="__resizable_base__",$i=function(t){Ti(o,t);function o(i){var e,n,a,r,s=t.call(this,i)||this;return s.ratio=1,s.resizable=null,s.parentLeft=0,s.parentTop=0,s.resizableLeft=0,s.resizableRight=0,s.resizableTop=0,s.resizableBottom=0,s.targetLeft=0,s.targetTop=0,s.appendBase=function(){if(!s.resizable||!s.window)return null;var c=s.parentNode;if(!c)return null;var l=s.window.document.createElement("div");return l.style.width="100%",l.style.height="100%",l.style.position="absolute",l.style.transform="scale(0, 0)",l.style.left="0",l.style.flex="0 0 100%",l.classList?l.classList.add(Gt):l.className+=Gt,c.appendChild(l),l},s.removeBase=function(c){var l=s.parentNode;l&&l.removeChild(c)},s.state={isResizing:!1,width:(n=(e=s.propsSize)===null||e===void 0?void 0:e.width)!==null&&n!==void 0?n:"auto",height:(r=(a=s.propsSize)===null||a===void 0?void 0:a.height)!==null&&r!==void 0?r:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},s.onResizeStart=s.onResizeStart.bind(s),s.onMouseMove=s.onMouseMove.bind(s),s.onMouseUp=s.onMouseUp.bind(s),s}return Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Oi},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){var i=0,e=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,a=this.resizable.offsetHeight,r=this.resizable.style.position;r!=="relative"&&(this.resizable.style.position="relative"),i=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:n,e=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:a,this.resizable.style.position=r}return{width:i,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizeStyle",{get:function(){var i=this,e=this.props.size,n=function(s){var c;if(typeof i.state[s]>"u"||i.state[s]==="auto")return"auto";if(i.propsSize&&i.propsSize[s]&&(!((c=i.propsSize[s])===null||c===void 0)&&c.toString().endsWith("%"))){if(i.state[s].toString().endsWith("%"))return i.state[s].toString();var l=i.getParentSize(),u=Number(i.state[s].toString().replace("px","")),f=u/l[s]*100;return f+"%"}return _t(i.state[s])},a=e&&typeof e.width<"u"&&!this.state.isResizing?_t(e.width):n("width"),r=e&&typeof e.height<"u"&&!this.state.isResizing?_t(e.height):n("height");return{width:a,height:r}},enumerable:!1,configurable:!0}),o.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var i=this.appendBase();if(!i)return{width:0,height:0};var e=!1,n=this.parentNode.style.flexWrap;n!=="wrap"&&(e=!0,this.parentNode.style.flexWrap="wrap"),i.style.position="relative",i.style.minWidth="100%",i.style.minHeight="100%";var a={width:i.offsetWidth,height:i.offsetHeight};return e&&(this.parentNode.style.flexWrap=n),this.removeBase(i),a},o.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},o.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},o.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var i=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:i.flexBasis!=="auto"?i.flexBasis:void 0})}},o.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},o.prototype.createSizeForCssProperty=function(i,e){var n=this.propsSize&&this.propsSize[e];return this.state[e]==="auto"&&this.state.original[e]===i&&(typeof n>"u"||n==="auto")?"auto":i},o.prototype.calculateNewMaxFromBoundary=function(i,e){var n=this.props.boundsByDirection,a=this.state.direction,r=n&&ot("left",a),s=n&&ot("top",a),c,l;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(c=r?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),l=s?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=r?this.resizableRight:this.window.innerWidth-this.resizableLeft,l=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=r?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),l=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(i=i&&i<c?i:c),l&&Number.isFinite(l)&&(e=e&&e<l?e:l),{maxWidth:i,maxHeight:e}},o.prototype.calculateNewSizeFromDirection=function(i,e){var n=this.props.scale||1,a=Hi(this.props.resizeRatio||1),r=a[0],s=a[1],c=this.state,l=c.direction,u=c.original,f=this.props,y=f.lockAspectRatio,b=f.lockAspectRatioExtraHeight,S=f.lockAspectRatioExtraWidth,z=u.width,R=u.height,v=b||0,h=S||0;return ot("right",l)&&(z=u.width+(i-u.x)*r/n,y&&(R=(z-h)/this.ratio+v)),ot("left",l)&&(z=u.width-(i-u.x)*r/n,y&&(R=(z-h)/this.ratio+v)),ot("bottom",l)&&(R=u.height+(e-u.y)*s/n,y&&(z=(R-v)*this.ratio+h)),ot("top",l)&&(R=u.height-(e-u.y)*s/n,y&&(z=(R-v)*this.ratio+h)),{newWidth:z,newHeight:R}},o.prototype.calculateNewSizeFromAspectRatio=function(i,e,n,a){var r=this.props,s=r.lockAspectRatio,c=r.lockAspectRatioExtraHeight,l=r.lockAspectRatioExtraWidth,u=typeof a.width>"u"?10:a.width,f=typeof n.width>"u"||n.width<0?i:n.width,y=typeof a.height>"u"?10:a.height,b=typeof n.height>"u"||n.height<0?e:n.height,S=c||0,z=l||0;if(s){var R=(y-S)*this.ratio+z,v=(b-S)*this.ratio+z,h=(u-z)/this.ratio+S,d=(f-z)/this.ratio+S,p=Math.max(u,R),m=Math.min(f,v),D=Math.max(y,h),x=Math.min(b,d);i=bt(i,p,m),e=bt(e,D,x)}else i=bt(i,u,f),e=bt(e,y,b);return{newWidth:i,newHeight:e}},o.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var e=i.getBoundingClientRect();this.parentLeft=e.left,this.parentTop=e.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var a=this.resizable.getBoundingClientRect(),r=a.left,s=a.top,c=a.right,l=a.bottom;this.resizableLeft=r,this.resizableRight=c,this.resizableTop=s,this.resizableBottom=l}},o.prototype.onResizeStart=function(i,e){if(!(!this.resizable||!this.window)){var n=0,a=0;if(i.nativeEvent&&Ni(i.nativeEvent)?(n=i.nativeEvent.clientX,a=i.nativeEvent.clientY):i.nativeEvent&&vt(i.nativeEvent)&&(n=i.nativeEvent.touches[0].clientX,a=i.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var r=this.props.onResizeStart(i,e,this.resizable);if(r===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var s,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var l=this.parentNode;if(l){var u=this.window.getComputedStyle(l).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",s=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var f={original:{x:n,y:a,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:q(q({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(i.target).cursor||"auto"}),direction:e,flexBasis:s};this.setState(f)}},o.prototype.onMouseMove=function(i){var e=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&vt(i))try{i.preventDefault(),i.stopPropagation()}catch{}var n=this.props,a=n.maxWidth,r=n.maxHeight,s=n.minWidth,c=n.minHeight,l=vt(i)?i.touches[0].clientX:i.clientX,u=vt(i)?i.touches[0].clientY:i.clientY,f=this.state,y=f.direction,b=f.original,S=f.width,z=f.height,R=this.getParentSize(),v=Bi(R,this.window.innerWidth,this.window.innerHeight,a,r,s,c);a=v.maxWidth,r=v.maxHeight,s=v.minWidth,c=v.minHeight;var h=this.calculateNewSizeFromDirection(l,u),d=h.newHeight,p=h.newWidth,m=this.calculateNewMaxFromBoundary(a,r);this.props.snap&&this.props.snap.x&&(p=Xt(p,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(d=Xt(d,this.props.snap.y,this.props.snapGap));var D=this.calculateNewSizeFromAspectRatio(p,d,{width:m.maxWidth,height:m.maxHeight},{width:s,height:c});if(p=D.newWidth,d=D.newHeight,this.props.grid){var x=Yt(p,this.props.grid[0]),P=Yt(d,this.props.grid[1]),A=this.props.snapGap||0,C=A===0||Math.abs(x-p)<=A?x:p,E=A===0||Math.abs(P-d)<=A?P:d;p=C,d=E}var w={width:p-b.width,height:d-b.height};if(S&&typeof S=="string"){if(S.endsWith("%")){var M=p/R.width*100;p=M+"%"}else if(S.endsWith("vw")){var F=p/this.window.innerWidth*100;p=F+"vw"}else if(S.endsWith("vh")){var $=p/this.window.innerHeight*100;p=$+"vh"}}if(z&&typeof z=="string"){if(z.endsWith("%")){var M=d/R.height*100;d=M+"%"}else if(z.endsWith("vw")){var F=d/this.window.innerWidth*100;d=F+"vw"}else if(z.endsWith("vh")){var $=d/this.window.innerHeight*100;d=$+"vh"}}var T={width:this.createSizeForCssProperty(p,"width"),height:this.createSizeForCssProperty(d,"height")};this.flexDir==="row"?T.flexBasis=T.width:this.flexDir==="column"&&(T.flexBasis=T.height);var U=this.state.width!==T.width,B=this.state.height!==T.height,H=this.state.flexBasis!==T.flexBasis,ft=U||B||H;ft&&Nt.flushSync(function(){e.setState(T)}),this.props.onResize&&ft&&this.props.onResize(i,y,this.resizable,w)}},o.prototype.onMouseUp=function(i){var e,n,a=this.state,r=a.isResizing,s=a.direction,c=a.original;if(!(!r||!this.resizable)){var l={width:this.size.width-c.width,height:this.size.height-c.height};this.props.onResizeStop&&this.props.onResizeStop(i,s,this.resizable,l),this.props.size&&this.setState({width:(e=this.props.size.width)!==null&&e!==void 0?e:"auto",height:(n=this.props.size.height)!==null&&n!==void 0?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:q(q({},this.state.backgroundStyle),{cursor:"auto"})})}},o.prototype.updateSize=function(i){var e,n;this.setState({width:(e=i.width)!==null&&e!==void 0?e:"auto",height:(n=i.height)!==null&&n!==void 0?n:"auto"})},o.prototype.renderResizer=function(){var i=this,e=this.props,n=e.enable,a=e.handleStyles,r=e.handleClasses,s=e.handleWrapperStyle,c=e.handleWrapperClass,l=e.handleComponent;if(!n)return null;var u=Object.keys(n).map(function(f){return n[f]!==!1?g.createElement(Wi,{key:f,direction:f,onResizeStart:i.onResizeStart,replaceStyles:a&&a[f],className:r&&r[f]},l&&l[f]?l[f]:null):null});return g.createElement("div",{className:c,style:s},u)},o.prototype.render=function(){var i=this,e=Object.keys(this.props).reduce(function(r,s){return Li.indexOf(s)!==-1||(r[s]=i.props[s]),r},{}),n=q(q(q({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var a=this.props.as||"div";return g.createElement(a,q({style:n,className:this.props.className},e,{ref:function(r){r&&(i.resizable=r)}}),this.state.isResizing&&g.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},o.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},o}(g.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Tt=function(t,o){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])},Tt(t,o)};function Ii(t,o){Tt(t,o);function i(){this.constructor=t}t.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}var N=function(){return N=Object.assign||function(o){for(var i,e=1,n=arguments.length;e<n;e++){i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a])}return o},N.apply(this,arguments)};function Fi(t,o){var i={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&o.indexOf(e)<0&&(i[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(t);n<e.length;n++)o.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(i[e[n]]=t[e[n]]);return i}var ji={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Ui=function(t){return{bottom:t,bottomLeft:t,bottomRight:t,left:t,right:t,top:t,topLeft:t,topRight:t}},Yi=function(t){Ii(o,t);function o(i){var e=t.call(this,i)||this;return e.resizingPosition={x:0,y:0},e.offsetFromParent={left:0,top:0},e.resizableElement={current:null},e.originalPosition={x:0,y:0},e.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:i.maxWidth,maxHeight:i.maxHeight},e.onResizeStart=e.onResizeStart.bind(e),e.onResize=e.onResize.bind(e),e.onResizeStop=e.onResizeStop.bind(e),e.onDragStart=e.onDragStart.bind(e),e.onDrag=e.onDrag.bind(e),e.onDragStop=e.onDragStop.bind(e),e.getMaxSizesFromProps=e.getMaxSizesFromProps.bind(e),e}return o.prototype.componentDidMount=function(){this.updateOffsetFromParent();var i=this.offsetFromParent,e=i.left,n=i.top,a=this.getDraggablePosition(),r=a.x,s=a.y;this.draggable.setState({x:r-e,y:s-n}),this.forceUpdate()},o.prototype.getDraggablePosition=function(){var i=this.draggable.state,e=i.x,n=i.y;return{x:e,y:n}},o.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},o.prototype.getParentSize=function(){return this.resizable.getParentSize()},o.prototype.getMaxSizesFromProps=function(){var i=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,e=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:i,maxHeight:e}},o.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},o.prototype.getOffsetHeight=function(i){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/e;case"body":return document.body.offsetHeight/e;default:return i.offsetHeight}},o.prototype.getOffsetWidth=function(i){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/e;case"body":return document.body.offsetWidth/e;default:return i.offsetWidth}},o.prototype.onDragStart=function(i,e){this.props.onDragStart&&this.props.onDragStart(i,e);var n=this.getDraggablePosition();if(this.originalPosition=n,!!this.props.bounds){var a=this.getParent(),r=this.props.scale,s;if(this.props.bounds==="parent")s=a;else if(this.props.bounds==="body"){var c=a.getBoundingClientRect(),l=c.left,u=c.top,f=document.body.getBoundingClientRect(),y=-(l-a.offsetLeft*r-f.left)/r,b=-(u-a.offsetTop*r-f.top)/r,S=(document.body.offsetWidth-this.resizable.size.width*r)/r+y,z=(document.body.offsetHeight-this.resizable.size.height*r)/r+b;return this.setState({bounds:{top:b,right:S,bottom:z,left:y}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var R=a.getBoundingClientRect(),v=R.left,h=R.top,d=-(v-a.offsetLeft*r)/r,p=-(h-a.offsetTop*r)/r,S=(window.innerWidth-this.resizable.size.width*r)/r+d,z=(window.innerHeight-this.resizable.size.height*r)/r+p;return this.setState({bounds:{top:p,right:S,bottom:z,left:d}})}else typeof this.props.bounds=="string"?s=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(s=this.props.bounds);if(!(!(s instanceof HTMLElement)||!(a instanceof HTMLElement))){var m=s.getBoundingClientRect(),D=m.left,x=m.top,P=a.getBoundingClientRect(),A=P.left,C=P.top,E=(D-A)/r,w=x-C;if(this.resizable){this.updateOffsetFromParent();var M=this.offsetFromParent;this.setState({bounds:{top:w-M.top,right:E+(s.offsetWidth-this.resizable.size.width)-M.left/r,bottom:w+(s.offsetHeight-this.resizable.size.height)-M.top,left:E-M.left/r}})}}}},o.prototype.onDrag=function(i,e){if(this.props.onDrag){var n=this.offsetFromParent,a=n.left,r=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(i,N(N({},e),{x:e.x+a,y:e.y+r}));if(this.props.dragAxis==="x")return this.props.onDrag(i,N(N({},e),{x:e.x+a,y:this.originalPosition.y+r,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(i,N(N({},e),{x:this.originalPosition.x+a,y:e.y+r,deltaX:0}))}},o.prototype.onDragStop=function(i,e){if(this.props.onDragStop){var n=this.offsetFromParent,a=n.left,r=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(i,N(N({},e),{x:e.x+a,y:e.y+r}));if(this.props.dragAxis==="x")return this.props.onDragStop(i,N(N({},e),{x:e.x+a,y:this.originalPosition.y+r,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(i,N(N({},e),{x:this.originalPosition.x+a,y:e.y+r,deltaX:0}))}},o.prototype.onResizeStart=function(i,e,n){i.stopPropagation(),this.setState({resizing:!0});var a=this.props.scale,r=this.offsetFromParent,s=this.getDraggablePosition();if(this.resizingPosition={x:s.x+r.left,y:s.y+r.top},this.originalPosition=s,this.props.bounds){var c=this.getParent(),l=void 0;this.props.bounds==="parent"?l=c:this.props.bounds==="body"?l=document.body:this.props.bounds==="window"?l=window:typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);var u=this.getSelfElement();if(u instanceof Element&&(l instanceof HTMLElement||l===window)&&c instanceof HTMLElement){var f=this.getMaxSizesFromProps(),y=f.maxWidth,b=f.maxHeight,S=this.getParentSize();if(y&&typeof y=="string")if(y.endsWith("%")){var z=Number(y.replace("%",""))/100;y=S.width*z}else y.endsWith("px")&&(y=Number(y.replace("px","")));if(b&&typeof b=="string")if(b.endsWith("%")){var z=Number(b.replace("%",""))/100;b=S.height*z}else b.endsWith("px")&&(b=Number(b.replace("px","")));var R=u.getBoundingClientRect(),v=R.left,h=R.top,d=this.props.bounds==="window"?{left:0,top:0}:l.getBoundingClientRect(),p=d.left,m=d.top,D=this.getOffsetWidth(l),x=this.getOffsetHeight(l),P=e.toLowerCase().endsWith("left"),A=e.toLowerCase().endsWith("right"),C=e.startsWith("top"),E=e.startsWith("bottom");if((P||C)&&this.resizable){var w=(v-p)/a+this.resizable.size.width;this.setState({maxWidth:w>Number(y)?y:w})}if(A||this.props.lockAspectRatio&&!P&&!C){var w=D+(p-v)/a;this.setState({maxWidth:w>Number(y)?y:w})}if((C||P)&&this.resizable){var w=(h-m)/a+this.resizable.size.height;this.setState({maxHeight:w>Number(b)?b:w})}if(E||this.props.lockAspectRatio&&!C&&!P){var w=x+(m-h)/a;this.setState({maxHeight:w>Number(b)?b:w})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(i,e,n)},o.prototype.onResize=function(i,e,n,a){var r={x:this.originalPosition.x,y:this.originalPosition.y},s=-a.width,c=-a.height,l=["top","left","topLeft","bottomLeft","topRight"];l.includes(e)&&(e==="bottomLeft"?r.x+=s:(e==="topRight"||(r.x+=s),r.y+=c));var u=this.draggable.state;(r.x!==u.x||r.y!==u.y)&&this.draggable.setState(r),this.updateOffsetFromParent();var f=this.offsetFromParent,y=this.getDraggablePosition().x+f.left,b=this.getDraggablePosition().y+f.top;this.resizingPosition={x:y,y:b},this.props.onResize&&this.props.onResize(i,e,n,a,{x:y,y:b})},o.prototype.onResizeStop=function(i,e,n,a){this.setState({resizing:!1});var r=this.getMaxSizesFromProps(),s=r.maxWidth,c=r.maxHeight;this.setState({maxWidth:s,maxHeight:c}),this.props.onResizeStop&&this.props.onResizeStop(i,e,n,a,this.resizingPosition)},o.prototype.updateSize=function(i){this.resizable&&this.resizable.updateSize({width:i.width,height:i.height})},o.prototype.updatePosition=function(i){this.draggable.setState(i)},o.prototype.updateOffsetFromParent=function(){var i=this.props.scale,e=this.getParent(),n=this.getSelfElement();if(!e||n===null)return{top:0,left:0};var a=e.getBoundingClientRect(),r=a.left,s=a.top,c=n.getBoundingClientRect(),l=this.getDraggablePosition(),u=e.scrollLeft,f=e.scrollTop;this.offsetFromParent={left:c.left-r+u-l.x*i,top:c.top-s+f-l.y*i}},o.prototype.render=function(){var i=this,e=this.props,n=e.disableDragging,a=e.style,r=e.dragHandleClassName,s=e.position,c=e.onMouseDown,l=e.onMouseUp,u=e.dragAxis,f=e.dragGrid,y=e.bounds,b=e.enableUserSelectHack,S=e.cancel,z=e.children;e.onResizeStart,e.onResize,e.onResizeStop,e.onDragStart,e.onDrag,e.onDragStop;var R=e.resizeHandleStyles,v=e.resizeHandleClasses,h=e.resizeHandleComponent,d=e.enableResizing,p=e.resizeGrid,m=e.resizeHandleWrapperClass,D=e.resizeHandleWrapperStyle,x=e.scale,P=e.allowAnyClick,A=Fi(e,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),C=this.props.default?N({},this.props.default):void 0;delete A.default;var E=n||r?{cursor:"auto"}:{cursor:"move"},w=N(N(N({},ji),E),a),M=this.offsetFromParent,F=M.left,$=M.top,T;s&&(T={x:s.x-F,y:s.y-$});var U=this.state.resizing?void 0:T,B=this.state.resizing?"both":u;return g.createElement(Mi,{ref:function(H){H&&(i.draggable=H)},handle:r?".".concat(r):void 0,defaultPosition:C,onMouseDown:c,onMouseUp:l,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:B,disabled:n,grid:f,bounds:y?this.state.bounds:void 0,position:U,enableUserSelectHack:b,cancel:S,scale:x,allowAnyClick:P,nodeRef:this.resizableElement},g.createElement($i,N({},A,{ref:function(H){H&&(i.resizable=H,i.resizableElement.current=H.resizable)},defaultSize:C,size:this.props.size,enable:typeof d=="boolean"?Ui(d):d,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:w,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:p,handleWrapperClass:m,handleWrapperStyle:D,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:R,handleClasses:v,handleComponent:h,scale:this.props.scale}),z))},o.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},o}(g.PureComponent);const Xi={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},Gi={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},me=30,be=166,ve={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${me}px`,minWidth:`${be}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}},we=t=>{const{windows:o}=Q(),{maximized:i=!1,minimized:e=!1}=o[t]||{},n=g.useRef(!1);return g.useEffect(()=>{n.current=!!(i||e)},[i,e]),n},Vi=(t,o,i=[],e=0,n)=>{const a=i.find(S=>S!==t)||"",{componentWindow:r}=(o==null?void 0:o[a])||{},{x:s=0,y:c=0,width:l=0,height:u=0}=(r==null?void 0:r.getBoundingClientRect())||{},f=n!=null&&n.width?_(n.width):ct(),y=n!=null&&n.height?_(n.height):ut();return!(s+e+l>f||c+e+u>y)&&(s||c)?{x:s+e,y:c+e}:void 0},Vt=({height:t,width:o},i)=>{const e=i?_(i.height):ut()-Jt,n=i?_(i.width):ct();return{x:Math.floor(n/2-_(o)/2),y:Math.floor(e/2-_(t)/2)}},rt={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},Ot=(t,o,i=!1)=>{const{position:e,size:n}=t||{},{x:a=0,y:r=0}=e||{},{height:s=0,width:c=0}=n||{};return i?a+rt.RIGHT>o.x||a+_(c)-rt.LEFT<0||r+rt.BOTTOM>o.y||r+rt.TOP<0:a<0||r<0||a+_(c)>o.x||r+_(s)>o.y},qt=(t,o)=>{const i=Number(t.height),e=Number(t.width),[n,a]=[ut(),ct()],r=n-Jt,s=Math.max(me,Math.min(i,r)),c=Math.max(be,Math.min(e,a));if(!o)return{height:s,width:c};const l=i===s,u=e===c;return!l&&!u?i>e?{height:s,width:Math.round(c/(r/s))}:{height:Math.round(s/(a/c)),width:c}:l?u?{height:s,width:c}:{height:Math.round(s/(e/c)),width:c}:{height:s,width:Math.round(c/(i/s))}},St=(t,o)=>{const{type:i,index:e,widthPercent:n=100,heightPercent:a=100}=t,r=_(o.width),s=_(o.height);let c=0,l=0,u=n/100*r,f=a/100*s;switch(i){case"twoColumns":c=e===0?0:r-u;break;case"threeColumns":c=(r-u)*e;break;case"fourGrid":c=e%2*(r/2),l=Math.floor(e/2)*(s/2);break;case"threeLeftOneRight":c=e===3?r/2:r/3*e,l=e===3?0:s/3*e;break;case"threeRightOneLeft":c=e===0?0:r/3*(e-1)+r/2,l=e===0?0:s/3*(e-1);break;case"fiveLeftGridRight":c=e===0?0:r/2+(e-1)%2*(r/4),l=e===0?0:Math.floor((e-1)/2)*(s/2);break;case"fiveRightGridLeft":c=e===4?r/2:e%2*(r/4),l=e===4?0:Math.floor(e/2)*(s/2);break}return u=n/100*r,f=a/100*s,{width:u,height:f,x:c,y:l}},qi=(t,o)=>{const{sizes:{window:{cascadeOffset:i}}}=Re(),{windows:e}=Q(),{autoSizing:n,closing:a,componentWindow:r,initialRelativePosition:s}=e[t]||{},{events:c}=dt(),{stackOrder:l,windowStates:{[t]:u}={}}=st(),{position:f,size:y}=u||{},{WindowsViewAreaSize:b}=pt(),S=g.useMemo(()=>Ot(u,{x:_(b==null?void 0:b.width)||ct(),y:_(b==null?void 0:b.height)||ut()}),[u,b]),[z,R]=g.useState(()=>!S&&f||Vi(t,e,l,i,b)||Vt(o,b)),v=we(t),h=g.useRef(z);return g.useEffect(()=>{h.current=z},[z]),g.useEffect(()=>{const d=De(m=>{const D={x:_(m.width)||ct(),y:_(m.height)||ut()};Ot({position:h.current,size:o},D,!0)&&R(({x,y:P})=>{const A=D.x-rt.RIGHT,C=D.y-rt.BOTTOM,E=x>A?A:x,w=P>C?C:P;return console.log({newX:E,newY:w}),E!==x||w!==P?{x:E,y:w}:{x,y:P}})},100),p=[c.on("event:elements/resize/windowsview",d)];return()=>{p.forEach(c.removeListenerByID),d.cancel()}},[o,c]),g.useLayoutEffect(()=>{n&&!a&&y&&!f&&!v.current&&R(Vt(y))},[n,v,a,f,y]),g.useLayoutEffect(()=>{s&&r&&o&&R(Ee(r,s,o))},[r,s,o]),[z,R]},Qi=t=>{const{windows:{[t]:o}={}}=Q(),{defaultSize:i,snap:e=!1}=o||{},{WindowsViewArea:n,WindowsViewAreaSize:a}=pt(),r=g.useMemo(()=>e&&typeof e=="object",[e]),s=g.useMemo(()=>{if(r){const c=n?et(n):a;return St(e,c)}return null},[r,e,n]);return g.useMemo(()=>r&&s?{height:s.height,width:s.width}:i?{height:i.height,width:i.width}:Ce,[r,s,i])},Ki=(t,o=!1)=>{const i=Qi(t),{events:e}=dt(),{windowStates:{[t]:{size:n=i}={}}={}}=st(),{windows:{[t]:{lockAspectRatio:a=!1,snap:r=!1,closing:s=!1}={},...c},setSnap:l}=Q(),{WindowsViewArea:u,WindowsViewAreaSize:f}=pt(),[y,b]=g.useState(()=>qt(n,a)),S=we(t),z=g.useMemo(()=>!s&&r&&typeof r=="object",[r,s]),R=g.useCallback(v=>{if(z){const h=u?et(u):f,d=_(v.width)/_(h.width),p=_(v.height)/_(h.height),m=p*100,D=d*100;console.log("Size changed + it is snap :: ",t,{newSize:v,newWidthPercent:d,newHeightPercent:p});const x=100-D;let P=100;r.type!=="twoColumns"&&(P-=m),Object.entries(c).filter(([C,{snap:E,closing:w}])=>!w&&E&&typeof E=="object"&&E.type===r.type).forEach(([C,{snap:E}])=>{console.log({someWindowID:C,availableWidthPercent:x,availableHeightPercent:P}),r.type==="twoColumns"&&(l(C,{...E,widthPercent:x,heightPercent:P}),e.emit("event:elements/resize/windowsview",h))}),l(t,{...r,widthPercent:d*100,heightPercent:p*100})}},[z,u,f,t,c,l,r]);return g.useEffect(()=>{const v=u?et(u):f,h=St(r,v);console.log({parsedSnap:h}),b({width:h.width||0,height:h.height||0})},[u,r]),g.useEffect(()=>{const v=[e.on(`event:windows/resize:${t}`,({size:h})=>R(h))];return console.log("onResize, change!"),()=>{v.forEach(e.removeListenerByID)}},[R,e,t]),g.useLayoutEffect(()=>{console.log("emitting size change"),e.emit(["event:windows/resize",`event:windows/resize:${t}`],{size:y,id:t})},[y,t,e]),g.useLayoutEffect(()=>{o&&!S.current&&b(qt(n,a))},[o,S,a,n]),[y,b]},kt=(t=!0)=>document.querySelectorAll("iframe").forEach(o=>{o.style.pointerEvents=t?"initial":"none"}),Zi=t=>{const{windows:{[t]:{snap:o=!1,allowResizing:i=!0,autoSizing:e=!1,lockAspectRatio:n=!1,maximized:a=!1}={}},setSnap:r}=Q(),{events:s}=dt(),{setWindowStates:c}=st(),{WindowsViewAreaSize:l,WindowsViewArea:u}=pt(),[f,y]=Ki(t,e),[b,S]=qi(t,f),z=o&&typeof o=="object";g.useLayoutEffect(()=>{a||s.emit(["event:windows/resize",`event:windows/resize:${t}`],{maximized:!1,size:f})},[a,f,t,s]),g.useLayoutEffect(()=>{const A=w=>{if(z){const M=St(o,w);y({width:M.width||0,height:M.height||0}),S({x:M.x||0,y:M.y||0})}},C=u?et(u):l;A(C);const E=[s.on("event:elements/resize/windowsview",A)];return()=>{E.forEach(s.removeListenerByID)}},[o,u]);const R=g.useCallback((A,C)=>{c(E=>({...E,[t]:{...E[t],position:A,size:C}}))},[t,c]),v=g.useCallback(()=>kt(!1),[]),h=g.useCallback((A,{x:C,y:E})=>{v();const w={x:C,y:E};s.emit(["event:windows/drag_start",`event:windows/drag_start:${t}`],{position:w,id:t})},[v,s,t]),d=g.useCallback((A,{x:C,y:E})=>{kt();const w={x:C,y:E},M=u?et(u):l;if(!Ot({position:w,size:f},{x:_(M.width),y:_(M.height)},!0)){const F=o&&typeof o=="object";S($=>{const T={x:Math.abs(w.x-$.x),y:Math.abs(w.y-$.y)};if((T.x>=5||T.y>=5)&&F){const U=u?et(u):l,B=St(o,U);y({width:B.width||0,height:B.height||0}),S({x:B.x||0,y:B.y||0}),r(t,!1)}return w}),R(w,f),s.emit(["event:windows/drag_stop",`event:windows/drag_stop:${t}`],{position:w,id:t})}},[u,f,o,S,R,s,t,y,r]),p=g.useCallback((A,C,E)=>{v();const w={width:_(E.style.width),height:_(E.style.height)};s.emit(["event:windows/resize_start",`event:windows/resize_start:${t}`],{size:w,id:t})},[s,t,v]),m=g.useCallback((A,C,{style:{height:E,width:w,transform:M}},F,$)=>{const[,T,U]=M.match(/translate\((-?\d+)px, (-?\d+)px\)/)||[],B=typeof T=="string"&&typeof U=="string"?{x:_(T),y:_(U)}:$;kt();const H={height:_(E),width:_(w)};B.y<0&&(H.height+=B.y,B.y=0),S(B),y(H),R(B,H),s.emit(["event:windows/resize_stop",`event:windows/resize_stop:${t}`],{position:B,size:H,id:t})},[t,S,y,s,R]),D=g.useMemo(()=>i&&!a?Gi:Xi,[i,a]),x=g.useCallback((A,{x:C,y:E})=>{const w={x:C,y:E};s.emit(["event:windows/drag",`event:windows/drag:${t}`],{position:w,id:t})},[s,t]),P=g.useCallback((A,C,{style:{height:E,width:w,transform:M}},F,$)=>{const T=$,U={height:_(E),width:_(w)};s.emit(["event:windows/resize",`event:windows/resize:${t}`],{position:T,size:U,id:t})},[s,t]);return{disableDragging:a,enableResizing:D,lockAspectRatio:n,onDrag:x,onDragStart:h,onDragStop:d,onResize:P,onResizeStart:p,onResizeStop:m,position:b,size:f,...ve}},Ji=t=>o=>{o==null||o.setAttribute("tabindex",te.tabIndex.toString()),o==null||o.addEventListener("contextmenu",Wt),o==null||o.addEventListener("mousedown",i=>{i.preventDefault(),t==null||t.focus(ht)})},to=({children:t,id:o,zIndex:i})=>{const{linkElement:e,windows:{[o]:n}}=Q(),{Component:a,componentWindow:r,maximized:s,minimized:c}=n||{},l=g.useRef(null),u=Zi(o),f=g.useMemo(()=>({pointerEvents:c?"none":void 0,zIndex:i,willChange:"transform"}),[c,i]),y=g.useCallback(b=>{var R,v;l.current=b;const S=((v=(R=b==null?void 0:b.resizableElement)==null?void 0:R.current)==null?void 0:v.children)||[],[z]=S;a&&!r&&z&&e(o,"componentWindow",z)},[a,r,o,e]);return g.useEffect(()=>{var b,S;if(!s){const{current:z}=l,R=((S=(b=z==null?void 0:z.resizableElement)==null?void 0:b.current)==null?void 0:S.children)||[],[v,h]=R;[...(h==null?void 0:h.children)||[]].forEach(Ji(v))}},[s]),k.jsx(Yi,{ref:y,style:f,...u,children:t})},eo=at(Pe.section)`
  background-color: ${({$backgroundColor:t,theme:o})=>t||o.colors.window.background};
  box-shadow: ${({$showShadows:t,$isForeground:o,theme:i})=>t?o?i.colors.window.shadow:i.colors.window.shadowInactive:"0"};
  contain: strict;
  height: 100%;
  outline: ${({$isForeground:t,theme:o})=>`${o.sizes.window.outline} solid ${t?o.colors.window.outline:o.colors.window.outlineInactive}`};
  overflow: hidden;
  position: relative;
  width: 100%;
`,Qt=({$foreground:t,theme:o})=>t?`1px solid ${o.colors.titleBar.background}`:`1px solid ${o.colors.titleBar.backgroundInactive}`,io=at.header`
  background-color: ${({$foreground:t,theme:o})=>t?o.colors.titleBar.background:o.colors.titleBar.backgroundInactive};
  border-bottom: ${Qt};
  display: flex;
  height: ${({theme:t})=>t.sizes.titleBar.height}px;
  position: relative;
  top: 0;
  z-index: 2;
  user-select: none;
  pointer-events: all;
  box-sizing: border-box;
  font-variant-numeric: tabular-nums;
  text-rendering: optimizelegibility;
  
  > button {
    align-items: center;
    color: ${({$foreground:t,theme:o})=>t?o.colors.titleBar.text:o.colors.titleBar.textInactive};
    display: flex;
    flex-grow: 1;
    font-size: ${({theme:t})=>t.sizes.titleBar.fontSize};
    font-weight: 400;
    min-width: 0;

    figure {
      align-items: center;
      display: flex;
      margin-left: 8px;
      min-width: inherit;
      pointer-events: none;
      position: relative;
      top: -1px;

      picture {
        height: ${({theme:t})=>t.sizes.titleBar.iconSize};
        margin-right: ${({theme:t})=>t.sizes.titleBar.iconMarginRight};
        width: ${({theme:t})=>t.sizes.titleBar.iconSize};
      }

      img,
      picture {
        pointer-events: all;
      }

      figcaption {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
    }
  }

  nav {
    display: flex;

    button {
      border-left: ${Qt};
      box-sizing: content-box;
      display: flex;
      place-content: center;
      place-items: center;
      width: ${({theme:t})=>t.sizes.titleBar.buttonWidth};

      svg {
        fill: ${({$foreground:t,theme:o})=>t?o.colors.titleBar.text:o.colors.titleBar.buttonInactive};
        margin: 0 1px 2px 0;
        width: ${({theme:t})=>t.sizes.titleBar.buttonIconWidth};
      }

      &.minimize {
        svg {
          margin-bottom: 1px;
          margin-right: 0;
        }
      }

      &:hover {
        background-color: ${({theme:t})=>t.colors.titleBar.backgroundHover};

        svg {
          fill: ${({theme:t})=>t.colors.titleBar.text};
        }

        &.close {
          background-color: ${({theme:t})=>t.colors.titleBar.closeHover};
          transition: background-color 0.25s ease;
        }
      }

      &:active {
        background-color: rgb(51, 51, 51);

        &.close {
          background-color: rgb(139, 10, 20);
        }
      }

      &:disabled {
        svg {
          fill: ${({$foreground:t})=>t?"rgb(50, 50, 50)":"rgb(60, 60, 60)"};
        }

        &:hover {
          background-color: inherit;
        }
      }
    }
  }
`,oo=12,Kt=(t,o=!1)=>{const i=g.useRef(),e=g.useRef(0);return{onClick:g.useCallback(a=>{const r=()=>{a.stopPropagation(),t(a)},s=()=>{i.current&&(clearTimeout(i.current),i.current=void 0)},c=()=>{e.current>=oo&&s(),i.current===void 0?(a.target.removeEventListener("pointermove",c),e.current=0):e.current+=1};o?r():i.current===void 0?(i.current=window.setTimeout(s,yt.DOUBLE_CLICK),a.target.addEventListener("pointermove",c,{passive:!0})):(s(),r())},[t,o])}},no=at(xt)`
  user-select: none;
`,ro=({id:t})=>{const{windows:{[t]:o}}=Q(),{allowResizing:i=!0,closing:e,componentWindow:n,hideMaximizeButton:a,hideMinimizeButton:r,hideTitlebarIcon:s,icon:c,titlebarIcon:l,title:u,maximized:f}=o||{},{foregroundId:y}=st(),b=t===y,{onClose:S,onMaximize:z,onMinimize:R}=Le(t),v=Kt(S),h=Kt(z),{menu:d,setMenu:p}=Ae(),m=$e(t),D=g.useRef(0),x=g.useRef(),P=g.useRef(),A=g.useCallback(w=>{const{x:M,y:F}=(n==null?void 0:n.getBoundingClientRect())||{};Date.now()-D.current>=Me&&x.current&&x.current.x===M&&x.current.y===F&&m.onContextMenuCapture(Object.assign(w,{touches:P.current}))},[n,m]),C=g.useCallback(({touches:w})=>{n&&(n.blur(),n.focus(ht),D.current=Date.now(),x.current=n.getBoundingClientRect(),P.current=w)},[n]),E=g.useMemo(()=>{if(!c&&!l)return!1;const w=l||c;if(typeof w=="string")return k.jsx(_e,{alt:u,imgSize:16,src:w,...v});if($t.isValidElement(w))return $t.cloneElement(w,{...v});if(typeof w=="function"){const M=w;return k.jsx(M,{...v})}},[c,l,v,u]);return k.jsxs(io,{$foreground:b,className:ve.dragHandleClassName,onDragOver:Wt,onDrop:Wt,...m,children:[k.jsx(no,{...!a&&i&&!e?h:{},onMouseDownCapture:({button:w})=>{w===0&&Object.keys(d).length>0&&p(Object.create(null))},onMouseUpCapture:()=>{n&&n!==document.activeElement&&n.focus(ht)},onTouchEndCapture:A,onTouchStartCapture:C,children:k.jsxs("figure",{children:[!s&&E!==!1&&k.jsx("picture",{children:E}),k.jsx("figcaption",{children:u})]})}),k.jsxs("nav",{className:"cancel",children:[!r&&k.jsx(xt,{className:"minimize",onClick:()=>R(),...Ct("Minimize"),children:k.jsx(Oe,{})}),!a&&k.jsx(xt,{className:"maximize",disabled:!i,onClick:z,...Ct(f?"Restore Down":"Maximize"),children:f?k.jsx(Ne,{}):k.jsx(Be,{})}),k.jsx(xt,{$short:a&&r,className:"close",onClick:S,...Ct("Close"),children:k.jsx(He,{})})]})]})},so=g.memo(ro),ao=(t,o)=>{const{foregroundId:i,prependToStack:e,setForegroundId:n,stackOrder:a=[]}=st(),{events:r}=dt(),{windows:{[t]:s}}=Q(),{closing:c,componentWindow:l,minimized:u,taskbarEntry:f}=s||{},y=g.useMemo(()=>a.length+(u?1:-a.indexOf(t))+1,[t,u,a]),b=g.useCallback(z=>{var m;const{relatedTarget:R}=z,v=R,h=R===f,d=v&&((m=f==null?void 0:f.previousSibling)==null?void 0:m.contains(v)),p=v&&(l==null?void 0:l.contains(v));n(D=>D===t&&!h&&!p?(d?l==null||l.focus(ht):r.emit(["event:windows/unfocus",`event:windows/unfocus:${t}`],t,z),d?D:""):D)},[o,l,t,n,f,r]),S=g.useCallback(z=>{const{relatedTarget:R}=z||{};l!=null&&l.contains(document.activeElement)?(e(t),n(t)):(!R||document.activeElement===f)&&(l==null||l.focus(ht))},[o,l,t,e,n,f]);return g.useLayoutEffect(()=>{t===i&&r.emit(["event:windows/focus",`event:windows/focus:${t}`],t)},[i,t,r]),g.useLayoutEffect(()=>{t===i&&S()},[i,t,S]),g.useLayoutEffect(()=>{l&&!c&&!u&&n(t)},[c,l,t,u,n]),g.useLayoutEffect(()=>{e(t),n(t)},[t,e,n]),g.useMemo(()=>({onBlurCapture:b,onClickCapture:S,onFocusCapture:S,zIndex:y,...te}),[S,b,y])},Zt={height:"inherit",opacity:1,scale:1,width:"inherit"},ye={opacity:0,scale:.95},xe={...ye,height:"inherit",width:"inherit"},lo={...xe,scale:1},co={opacity:1,scale:1},uo={opacity:0,scale:.3},ho=(t,o=!1)=>{const{windows:{[t]:i}={}}=Q(),{closing:e,componentWindow:n,maximized:a,minimized:r,taskbarEntry:s,snap:c}=i||{},{WindowsViewArea:l,WindowsViewAreaSize:u}=pt(),[f,y]=g.useState(Object.create(null)),[b,S]=g.useState(Object.create(null));g.useState(Object.create(Zt)),g.useState({x:0,y:0});const[z,R]=g.useState(!0),{events:v}=dt(),h=g.useRef(null),d=g.useCallback(()=>{if(!n||e)return{x:0,y:0};const{x:p=0,y:m=0}=n.getBoundingClientRect(),{x:D=0,y:x=0}=l?l.getBoundingClientRect():{x:0,y:0};return{x:-p+D,y:-m+x}},[l,e,n]);return g.useLayoutEffect(()=>{if(!n||e)return;const p=d();y({...co,...l?et(l):u,x:p.x,y:p.y})},[e,d,n,a,l]),g.useLayoutEffect(()=>{if(!s||!n||e)return;const{height:p=0,width:m=0,x:D=0,y:x=0}=s.getBoundingClientRect(),{height:P=0,width:A=0,x:C=0,y:E=0}=n.getBoundingClientRect(),w=Math.round(D-C-A/2+m/2),M=Math.round(x-E-P/2+p/2);w===0&&M===0||S({...uo,x:w,y:M})},[e,n,r,s]),g.useEffect(()=>{a&&setTimeout(()=>{v.emit(["event:windows/resize",`event:windows/resize:${t}`],{maximized:!0,size:et(l)})},yt.WINDOW+150);const p=D=>{a&&(y(x=>({...x,...D})),setTimeout(()=>{v.emit(["event:windows/resize",`event:windows/resize:${t}`],{maximized:!0,size:D})},yt.WINDOW+150))},m=[v.on("event:elements/resize/windowsview",p)];return()=>{m.forEach(v.removeListenerByID)}},[t,a,l,v]),g.useEffect(()=>(h.current&&clearTimeout(h.current),r?h.current=setTimeout(()=>{R(!1)},yt.WINDOW+150):R(!0),()=>{h.current&&clearTimeout(h.current)}),[r]),{animate:(r?"minimize":"")||(!e&&a?"maximize":"")||"active",exit:"exit",initial:"initial",transition:{duration:ke.WINDOW,ease:[.05,.1,.7,.3]},variants:{active:Zt,exit:ye,initial:o?lo:xe,maximize:f,minimize:b}}},po="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKElEQVR42mOgMRgF6enp/ynSDMMUaEZgsjST5RJsikk2AKc4bcAoAADI7y5FsB5j/QAAAABJRU5ErkJggg==",fo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mOgARgF6enp/0kRZ8KvGMEnyQUwjMwn0xBMzWQZQlmA0h6MAgAuqCnfdOk/ZQAAAABJRU5ErkJggg==",go="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAG0lEQVR42mPAD0ZBenr6fxge4ppHuiGEwSgAAGJiLkXUVlYDAAAAAElFTkSuQmCC",mo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAG0lEQVR42mPADkZBenr6fxgeZoYMV82Ug1EAAPiTLkWjutmQAAAAAElFTkSuQmCC",G={dark:{active:"rgb(166, 166, 166)",blendMode:"color-burn",buttonHover:"rgb(55, 55, 55)",thumb:"rgb(77, 77, 77)",thumbHover:"rgb(122, 122, 122)",track:"rgb(23, 23, 23)"},light:{active:"rgb(96, 96, 96)",blendMode:"color-dodge",buttonHover:"rgb(218, 218, 218)",thumb:"rgb(205, 205, 205)",thumbHover:"rgb(166, 166, 166)",track:"rgb(240, 240, 240)"}},bo=({size:t=Te,verticalX:o=0,verticalY:i=0,scheme:e="dark",scrollbarGutter:n=!0}={})=>We`
  overflow: auto;
  ${n&&"scrollbar-gutter: stable;"}

  @supports not selector(::-webkit-scrollbar) {
    scrollbar-color: ${G[e].thumb} ${G[e].track};
  }

  &::-webkit-scrollbar {
    height: ${t}px;
    width: ${t}px;
  }

  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: ${G[e].track};
  }

  &::-webkit-scrollbar-thumb {
    background-clip: padding-box;
    background-color: ${G[e].thumb};
  }

  &::-webkit-scrollbar-thumb:vertical {
    background-clip: padding-box;
    background-color: ${G[e].thumb};
    border-left: 1px solid transparent;
    border-right: 1px solid transparent;
  }

  &::-webkit-scrollbar-thumb:horizontal {
    border-bottom: 1px solid transparent;
    border-top: 1px solid transparent;
  }

  &::-webkit-scrollbar-thumb:hover {
    background-color: ${G[e].thumbHover};
  }

  &::-webkit-scrollbar-thumb:active {
    background-color: ${G[e].active};
  }

  &::-webkit-scrollbar-button:single-button {
    background-clip: padding-box;
    background-color: ${G[e].track};
    background-position: center 4px;
    background-repeat: no-repeat;
    background-size: 10px;
    border: 1px solid ${G[e].track};
    display: block;
    height: ${t?`${t}px`:"initial"};

    &:hover {
      background-color: ${G[e].buttonHover};
    }

    &:active {
      background-color: ${G[e].active};
    }
  }

  &::-webkit-scrollbar-button:single-button:vertical:decrement,
  &::-webkit-scrollbar-button:single-button:vertical:increment {
    background-position-x: ${o===0?"center":`${o}px`};
    background-position-y: ${i===0?"center":`${i}px`};
    background-size: 16px;
    border-bottom: 0;
    border-top: 0;
    image-rendering: pixelated;
  }

  &::-webkit-scrollbar-button:single-button:vertical:decrement {
    background-image: url(${po});
  }

  &::-webkit-scrollbar-button:single-button:vertical:increment {
    background-image: url(${fo});
  }

  &::-webkit-scrollbar-button:single-button:horizontal:decrement,
  &::-webkit-scrollbar-button:single-button:horizontal:increment {
    background-position: center;
    background-size: 16px;
    border-left: 0;
    border-right: 0;
    image-rendering: pixelated;
  }

  &::-webkit-scrollbar-button:single-button:horizontal:decrement {
    background-image: url(${go});
  }

  &::-webkit-scrollbar-button:single-button:horizontal:increment {
    background-image: url(${mo});
  }

  &::-webkit-scrollbar-button:single-button:vertical:decrement:active,
  &::-webkit-scrollbar-button:single-button:vertical:increment:active,
  &::-webkit-scrollbar-button:single-button:horizontal:decrement:active,
  &::-webkit-scrollbar-button:single-button:horizontal:increment:active {
    background-blend-mode: ${G[e].blendMode};
  }
`,vo=at.div`
  ${ee}
  background-color: inherit;
  height: inherit;
  width: inherit;
`,wo=at.div`
  ${ee}
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  height: 100%;
  justify-content: center;
`,yo=at.div`
  ${bo({scrollbarGutter:!1})}
  flex: 1;
  height: 100%;
  width: 100%;
  position: relative;
  display: flex;
  overflow: auto;
`,Eo=({children:t,id:o})=>{const{linkElement:i,windows:{[o]:e}}=Q(),{backgroundColor:n,Component:a,hideTitlebar:r,peekElement:s,maximized:c,snap:l}=e||{},{foregroundId:u}=st(),f=o===u,{zIndex:y,...b}=ao(o),S=ho(o,c),z=g.useCallback(v=>{a&&!s&&v&&i(o,"peekElement",v)},[a,o,i,s]),R=l&&typeof l=="object";return k.jsx(to,{id:o,zIndex:y,children:k.jsx(eo,{$showShadows:f&&!c&&!R,$backgroundColor:n,$isForeground:f,...b,...S,"data-rd-type":"rd_window",children:k.jsx(vo,{"data-rd-type":"rd_link_viewport_entry",ref:z,children:k.jsxs(wo,{"data-rd-type":"rd_window_wrapper",children:[!r&&k.jsx(so,{id:o}),k.jsx(yo,{"data-rd-type":"rd_window_content",children:t})]})})})})};export{Eo as default};
