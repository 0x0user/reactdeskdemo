import{useCallback as C,useMemo as S}from"react";import{u as Q,a as u,b as U,P as h,c as O,M as b}from"./index-CWDlX6LS.js";const F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAMElEQVR4AWMgEoyC2TCAwsYPFqMCouzZCQPEOmzvnj0QRJTqo6iAgOoLMIDCHsYAACjTO7/gCQlBAAAAAElFTkSuQmCC",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAR0lEQVR42u3IoRHAMAzFUO+/gllKG5IgD2DujX4vC8ikMO9ORHb9xN1FWWc8Q5R15jt1gs/22jrBZxGhE3yWmaKsU1Wi7EIfHneIsXEKuhAAAAAASUVORK5CYII=",w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mOgEhgFnp6e//Fh+hmALj5UDBj4QBwFANQKUXn4YyGJAAAAAElFTkSuQmCC",x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIUlEQVR42mMYPGAUjIIDBw78x4cJGnDu3Ln/+DB+3aMAAPFzNUFuAVJEAAAAAElFTkSuQmCC",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGElEQVR42mMYPGAUjAJPT8//+DCNDRgFAPTaHaFVv24VAAAAAElFTkSuQmCC",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAOklEQVR4AWMYVmA2BiBN/6JFi3DKrcUAEEGcGnZiAIggTg1HwQCNDSSpp+H8hQtoiECAXMcADMMbAABMtF75qvi0qwAAAABJRU5ErkJggg==",V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJElEQVR42mNABaPA09PzPzZMsaFk20x/A2D8gTIAE9Mp+kYBAJPzT5+OMe9rAAAAAElFTkSuQmCC",d=A=>{const{stackOrder:n=[]}=Q(),{windows:e}=u();return n.find(o=>{var t;return o!==A&&!((t=e==null?void 0:e[o])!=null&&t.minimized)})||""},p=A=>{const n=d(A),{setForegroundId:e,removeFromStack:i}=Q(),{closeWithTransition:o,maximize:t,minimize:E,setSnap:s}=u(),a=U(),m=C(g=>{E(A),s(A,!1),g||e(n)},[A,E,s,n,e]),c=C(()=>{var R,r;const g=()=>{var B,I;t(A),e(A),(I=(B=a.current[A])==null?void 0:B.componentWindow)==null||I.focus(h),s(A,!1)},[M]=((r=(R=a.current[A])==null?void 0:R.componentWindow)==null?void 0:r.getAnimations())||[];M!=null&&M.finished?M.finished.then(g):g()},[A,s,t,a,e]);return{onClose:C(()=>{i(A),o(A),e(n)},[o,A,n,i,e]),onMaximize:c,onMinimize:m}},G=A=>{const{contextMenu:n}=O(),{onClose:e,onMaximize:i,onMinimize:o}=p(A),{windows:{[A]:t}}=u(),{allowResizing:E=!0,hideMaximizeButton:s,hideMinimizeButton:a,maximized:m,minimized:c}=t||{};return S(()=>n==null?void 0:n(()=>{const l=m||c,g=!s||!a;return[g&&{action:()=>{c?o():i()},disabled:!l,icon:l?f:V,label:"Restore"},!a&&{action:o,disabled:c,icon:c?T:x,label:"Minimize"},!s&&{action:i,disabled:l||!E,icon:l?w:z,label:"Maximize"},g&&b,{action:e,icon:F,label:"Close"}].filter(Boolean)}),[E,n,s,a,m,c,e,i,o])};export{G as a,p as b,d as u};
